(function(t){function e(e){for(var i,r,o=e[0],u=e[1],c=e[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);l&&l(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,o=1;o<a.length;o++){var u=a[o];0!==s[u]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},s={app:0},n=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},1:function(t,e){},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i,s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},["LOGIN"===t.display?a("Login",{attrs:{createUser:t.createUser}}):t._e(),"ROOMS"===t.display?a("Rooms",{attrs:{username:t.user.name,join:t.join}}):t._e(),"QUIZ"===t.display?a("Quiz",{attrs:{qid:t.qid,username:t.user.name}}):t._e()],1)},r=[],o=a("d4ec"),u=a("bee2"),c=a("2caf"),l=a("262e"),d=a("9ab4"),m=a("60a3"),v=(a("b0c0"),function t(e){Object(o["a"])(this,t),this.rooms=[],this.name=e}),f=(a("99af"),a("7db0"),a("5530")),p=a("2909"),b=function(){function t(e){Object(o["a"])(this,t),this.name="",this.database={databases:[]};try{this.name=e;var a=window.localStorage.getItem(this.name);a?this.database=this.deserialise(a):this.create()}catch(i){throw new Error(i)}}return Object(u["a"])(t,[{key:"getDatabase",value:function(t){var e=this.database.databases,a=e.find((function(e){return e.username===t.name}));if(a)return a;var i={username:t.name,rooms:[]};return e=[].concat(Object(p["a"])(e),[i]),this.save(this.serialise(this.database)),i}},{key:"addRoom",value:function(t,e){var a=this.database.databases,i=a.find((function(e){return e.username===t.name}));i?i.rooms=Object(f["a"])({},i.rooms,{},e):(a=[].concat(Object(p["a"])(a),[{username:t.name,rooms:[e]}]),this.database={databases:a}),this.save(this.serialise(this.database))}},{key:"clear",value:function(){var t=JSON.stringify({database:[]});window.localStorage.setItem(this.name,t)}},{key:"create",value:function(){try{window.localStorage.setItem(this.name,JSON.stringify(this.database))}catch(t){throw new Error(t)}}},{key:"deserialise",value:function(t){try{var e=JSON.parse(t);return e||this.database}catch(a){throw new Error(a)}}},{key:"serialise",value:function(t){try{return JSON.stringify(t)}catch(e){throw new Error(e)}}},{key:"save",value:function(t){try{window.localStorage.setItem(this.name,t)}catch(e){throw new Error(e)}}}]),t}();(function(t){t["ROOMS"]="ROOMS",t["QUIZ"]="QUIZ",t["LOGIN"]="LOGIN"})(i||(i={}));var h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("div",{staticClass:"columns is-centered is-vcentered",staticStyle:{height:"100vh"}},[a("div",{staticClass:"column is-one-third"},[a("div",{staticClass:"box"},[a("h1",{staticClass:"title has-text-centered"},[t._v("Trivially")]),a("h2",{staticClass:"subtitle has-text-centered"},[t._v("Be Socially Isolated")]),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],ref:"loginInput",staticClass:"input",attrs:{type:"text",placeholder:"Enter user name"},domProps:{value:t.username},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createUser(t.username)},input:function(e){e.target.composing||(t.username=e.target.value)}}})]),a("div",{staticClass:"control"},[a("button",{class:["button",t.username&&"is-primary"],attrs:{title:"Lock it in!",disabled:""===t.username},on:{click:function(e){return t.createUser(t.username)}}},[t._v(" Lock it in! ")])])])])])])])},y=[],O=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.username="",t}return Object(u["a"])(a,[{key:"mounted",value:function(){var t=this.$refs.loginInput;t.focus()}}]),a}(m["d"]);Object(d["a"])([Object(m["b"])()],O.prototype,"createUser",void 0),Object(d["a"])([Object(m["c"])()],O.prototype,"loginInput",void 0),O=Object(d["a"])([m["a"]],O);var w=O,g=w,_=a("2877"),k=Object(_["a"])(g,h,y,!1,null,null,null),I=k.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rooms"},[a("div",{staticClass:"tile is-ancestor",staticStyle:{margin:"1em"}},[a("div",{staticClass:"tile is-parent"},[a("article",{staticClass:"tile is-child box"},[a("p",{staticClass:"title"},[t._v("Quiz Rooms")]),a("hr"),a("div",{staticClass:"content"},[t.database.rooms.length>=1?a("div",t._l(t.database.rooms,(function(e){return a("div",{key:e.id},[a("h5",{staticClass:"title is-5"},[t._v(t._s(e.name))]),a("p",{staticClass:"title is-6"},[t._v("Category: "+t._s(e.quiz.category))]),a("p",{staticClass:"title is-6"},[t._v(" No. Questions: "+t._s(e.quiz.questions.length)+" ")]),a("button",{staticClass:"button is-primary is-outlined",on:{click:function(a){return t.join(e.id)}}},[t._v(" Start")]),t._v(" "),a("button",{staticClass:"button",on:{click:function(a){return t.removeQuizRoom(e.id)}}},[t._v(" Remove ")]),a("br"),a("br")])})),0):a("div",[t._v("No Quiz Rooms :(")])])])]),a("div",{staticClass:"tile is-parent is-9"},[a("article",{staticClass:"tile is-child box"},[a("p",{staticClass:"title"},[t._v("Actions")]),a("hr"),a("div",{staticClass:"content"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newQuizRoomName,expression:"newQuizRoomName"}],staticClass:"input",attrs:{type:"text",placeholder:"New Quiz Room"},domProps:{value:t.newQuizRoomName},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createDatabase(t.newQuizRoomName)},input:function(e){e.target.composing||(t.newQuizRoomName=e.target.value)}}}),a("br"),a("br"),a("button",{staticClass:"button is-fullwidth is-primary is-outlined",on:{click:function(e){return t.createDatabase(t.newQuizRoomName)}}},[t._v(" Create ")]),a("br"),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quizRoomId,expression:"quizRoomId"}],staticClass:"input",attrs:{type:"text",placeholder:"Enter Quiz Room ID"},domProps:{value:t.quizRoomId},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.join(t.quizRoomId)},input:function(e){e.target.composing||(t.quizRoomId=e.target.value)}}}),a("br"),a("br"),a("button",{staticClass:"button is-fullwidth is-primary is-outlined",on:{click:function(e){return t.join(t.quizRoomId)}}},[t._v(" Join ")])])])])])])])},C=[],z=(a("c740"),a("4160"),a("d81d"),a("a434"),a("159b"),a("96cf"),a("1da1")),x=a("ec26"),q=a("bc3a"),S=a.n(q),Q=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.newQuizRoomName="",t.quizRoomId="",t.database=null,t.api="https://opentdb.com/api.php?amount=10&category=9&type=multiple",t}return Object(u["a"])(a,[{key:"created",value:function(){this.database=this.getDatabase(this.username)}},{key:"getDatabase",value:function(t){var e=window.localStorage.getItem("trivially"),a={username:t,rooms:[]};if(!e)return a;var i=JSON.parse(e);if(!i)return a;if(!i.databases)return a;var s=i.databases.find((function(e){return e.username===t}));return s||a}},{key:"createDatabase",value:function(t){var e=this;this.newQuizRoomName="",this.generateQuiz().then((function(a){var i={name:t,id:Object(x["a"])(),quiz:a,admin:[e.username],players:[]},s=window.localStorage.getItem("trivially");if(s){var n=JSON.parse(s);if(n){var r=n.databases.find((function(t){return t.username===e.username}));r?(n.databases.forEach((function(t){t.username===e.username&&t.rooms.push(i)})),window.localStorage.setItem("trivially",JSON.stringify(n))):(n.databases.push({username:e.username,rooms:[i]}),window.localStorage.setItem("trivially",JSON.stringify(n))),e.database&&(e.database.rooms=[].concat(Object(p["a"])(e.database.rooms),[Object(f["a"])({},i)]))}}else window.localStorage.setItem("trivially",JSON.stringify({databases:[{username:e.username,rooms:[i]}]})),e.database={username:e.username,rooms:[i]}}))}},{key:"removeQuizRoom",value:function(t){var e=this;if(this.database){var a=this.database.rooms.findIndex((function(e){return e.id===t}));this.database.rooms.splice(a,1);var i=window.localStorage.getItem("trivially");if(i){var s=JSON.parse(i);if(s){var n=s.databases.find((function(t){return t.username===e.username}));if(n){n.rooms.splice(a,1);var r=JSON.stringify(s);window.localStorage.setItem("trivially",r)}}}}}},{key:"generateQuiz",value:function(){var t=Object(z["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get(this.api);case 3:return e=t.sent,a=e.data.results[0]["category"],i=e.data.results.map((function(t){return{question:t.question,difficulty:t.difficulty,answers:[].concat(Object(p["a"])(t.incorrect_answers),[t.correct_answer]),correctAnswer:t.correct_answer}})),s={category:a,questions:i,currentQuestionIndex:0,isStarted:!1},t.abrupt("return",s);case 10:throw t.prev=10,t.t0=t["catch"](0),new Error(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}()}]),a}(m["d"]);Object(d["a"])([Object(m["b"])()],Q.prototype,"username",void 0),Object(d["a"])([Object(m["b"])()],Q.prototype,"join",void 0),Q=Object(d["a"])([m["a"]],Q);var N=Q,R=N,E=Object(_["a"])(R,j,C,!1,null,null,null),J=E.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"quiz"},[a("div",{staticClass:"tile is-ancestor",staticStyle:{margin:"1em"}},[a("div",{staticClass:"tile is-parent"},[t.room?a("article",{staticClass:"tile is-child box"},[a("p",{staticClass:"title"},[t._v("Players")]),a("p",{staticClass:"subtitle has-text-weight-light",staticStyle:{"font-size":"15px"}},[t._v(" "+t._s(t.room.id)+" ")]),a("hr"),a("div",{staticClass:"content"},[a("ul",t._l(t.room.players,(function(e){return a("li",{key:e.name},[t._v(" "+t._s(e.name)+" "),t.room.quiz.isStarted?a("span",{staticClass:"icon"},[void 0!==t.room.players.find((function(t){return t.name===e.name})).answers[t.room.quiz.currentQuestionIndex]?a("i",{staticClass:"fas fa-lock"}):t._e()]):t._e()])})),0)])]):t._e()]),a("div",{staticClass:"tile is-parent is-9"},[t.room?a("article",{staticClass:"tile is-child box"},[a("p",{staticClass:"title"},[t._v(" "+t._s(t.room.name)+t._s(t.room.quiz.isStarted?" - Round "+(t.room.quiz.currentQuestionIndex+1):"")+" ")]),a("p",{staticClass:"subtitle"},[t._v(t._s(t.room.quiz.category))]),a("hr"),t.room.quiz.isStarted?a("div",{staticClass:"content"},[a("p",{staticClass:"title is-3"},[t._v(" "+t._s(t.room.quiz.questions[t.room.quiz.currentQuestionIndex]["question"])+" ")]),a("p",{staticClass:"subtitle is-5"},[t._v(" Difficulty: "+t._s(t.room.quiz.questions[t.room.quiz.currentQuestionIndex]["difficulty"])+" ")]),t._l(t.room.quiz.questions[t.room.quiz.currentQuestionIndex].answers,(function(e,i){return a("div",{key:i,staticClass:"box"},[a("div",{staticClass:"control"},[a("label",{staticClass:"radio"},[a("input",{attrs:{type:"radio",name:"answer"},domProps:{value:i},on:{click:function(e){return t.setAnswer(i)}}}),t._v(" "+t._s(e)+" ")])])])})),a("button",{class:["button","is-fullwidth","is-primary"],attrs:{disabled:-1===t.answerIndex},on:{click:t.lockItIn}},[t._v(" Lock It In! ")])],2):a("div",{staticClass:"content"},[a("p",{staticClass:"is-centered"},[t._v("WAITING ON QUIZ TO CLICK START")])]),t.room.admin.includes(t.username)?a("div",[t.room.quiz.isStarted?t._e():a("button",{class:["button","is-primary"],on:{click:t.startQuiz}},[t._v(" Start Quiz ")]),t.room.quiz.isStarted&&t.room.quiz.currentQuestionIndex+1<t.room.quiz.questions.length?a("button",{class:["button","is-primary"],attrs:{disabled:!t.room.quiz.isStarted},on:{click:t.nextQuestion}},[t._v(" Next Question ")]):t._e()]):t._e()]):t._e()])])])},U=[],D=a("8055"),L=a.n(D),P=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.database=new b("trivially"),t.userDb=null,t.room=null,t.socket=L()(),t.answerIndex=-1,t}return Object(u["a"])(a,[{key:"mounted",value:function(){var t=this;this.socket.emit("join",{id:this.qid,username:this.username},(function(e){if(e)t.room=e;else{var a=t.database.database;if(a.databases.find((function(e){return e.rooms.find((function(e){return e.id===t.qid}))}))){var i=a.databases.find((function(e){return e.rooms.find((function(e){return e.id===t.qid}))}));if(i){var s=i.rooms.find((function(e){return e.id===t.qid}));t.socket.emit("newQuiz",{quiz:s,username:t.username})}}}})),this.socket.on("roomData",(function(e){console.log("UPDATE ROOM DATA"),console.log({roomData:e}),t.room=e}))}},{key:"setAnswer",value:function(t){this.answerIndex=t}},{key:"lockItIn",value:function(){console.log("LOCKING IT IN"),console.log({index:this.answerIndex}),this.socket.emit("lockInAnswer",{id:this.qid,username:this.username,answerIndex:this.answerIndex})}},{key:"isLockedIn",value:function(t){if(console.log("IsLocked In"),this.room){console.log(this.room);var e=this.room.players.find((function(e){return e.name===t}));if(console.log(e),e)return!!e.answers[this.room.quiz.currentQuestionIndex]}return!1}},{key:"startQuiz",value:function(){console.log("START QUIZ"),this.socket.emit("startQuiz",{id:this.qid})}},{key:"nextQuestion",value:function(){console.log("NEXT QUESTION"),this.socket.emit("nextQuestion",{id:this.qid})}}]),a}(m["d"]);Object(d["a"])([Object(m["b"])()],P.prototype,"qid",void 0),Object(d["a"])([Object(m["b"])()],P.prototype,"username",void 0),P=Object(d["a"])([m["a"]],P);var A=P,M=A,G=Object(_["a"])(M,T,U,!1,null,null,null),Z=G.exports,$=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.user=null,t.display=i.LOGIN,t.qid="",t}return Object(u["a"])(a,[{key:"createUser",value:function(t){this.user=new v(t),this.display=i.ROOMS}},{key:"join",value:function(t){console.log("JOIN",t),this.qid=t,this.display=i.QUIZ}}]),a}(m["d"]);$=Object(d["a"])([Object(m["a"])({components:{Login:I,Rooms:J,Quiz:Z}})],$);var K=$,B=K,W=Object(_["a"])(B,n,r,!1,null,null,null),X=W.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(X)}}).$mount("#app")}});
//# sourceMappingURL=app.951845b8.js.map